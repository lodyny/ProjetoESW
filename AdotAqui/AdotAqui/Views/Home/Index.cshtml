@model AdotAqui.Models.ViewModels.AnimalsViewModel

@{
    ViewData["Title"] = "Animais";
}

@section Styles {
    <link rel="stylesheet" href="~/lib/bootstrap/css/bootstrap-datepicker.css" />
    <link rel="stylesheet" href="~/css/auth.css" />
}

@section DocumentReadyScripts {
    $("#species-dropdown").select2({
        theme: "bootstrap",
        placeholder: "Escolha a espécie",
        width: "170px"
    });
    $("#breed-dropdown").select2({
        theme: "bootstrap",
        placeholder: "Seleccione uma espécie",
        width: "200px"
    });
}

@section Scripts {
    <script>
        function checkDropdown($form) {
            if ($("#breed-dropdown").prop('selectedIndex') != 0) {
                $("#breed-dropdown").val($("#breed-dropdown option:first").val());
            }
            $form.submit();
        }
    </script>
}

    <div class="container">

        <form id="animalSearchForm" method="post" class="form-inline">
            <div class="form-group">
                <label for="species-dropdown">Espécie:</label>
                <select id="species-dropdown" name="species" asp-items="@Model.GetSpeciesDropDown()" onchange="checkDropdown(this.form)">
                    <option></option>
                </select>
            </div>
            <div class="form-group">
                <label for="breed-dropdown">Raça:</label>
                <select id="breed-dropdown" name="breeds" asp-items="@Model.GetBreedsDropDown()" onchange="this.form.submit()">
                    <option></option>
                </select>
            </div>
            <div class="form-group ml-auto">
                <label for="name">Nome:</label>
                <input type="text" class="form-control" name="name" id="name" placeholder="Nome do animal" value="@Model.AnimalName" required>
                <button type="submit" class="btn btn-primary">Pesquisar</button>
            </div>
        </form>

        <div class="card-deck">
            @{
                int counter = 1;
                foreach (var animal in Model.Animals)
                {
            <div class="card mb-4">
                @if (animal.Image == null)
                {
                    <img class="card-img-top img-fluid" src="https://via.placeholder.com/500x500" alt="Card image cap">
                }
                else
                {
                    <img class="card-img-top img-fluid" src="@Html.DisplayFor(modelItem => animal.Image)" alt="Card image cap">
                }
                <div class="card-body">
                    <h4 class="card-title">@Html.DisplayFor(modelItem => animal.Name)</h4>
                    <p class="card-text">Espécie: @Html.DisplayFor(modelItem => animal.Breed.Specie.NamePt)</p>
                    <p class="card-text">Raça: @Html.DisplayFor(modelItem => animal.Breed.NamePt)</p>
                    <p class="card-text">Gênero: @Html.DisplayFor(modelItem => animal.Gender)</p>
                    <p class="card-text">Altura: @Html.DisplayFor(modelItem => animal.Height) cm</p>
                    <p class="card-text">Peso: @Html.DisplayFor(modelItem => animal.Weight) kg</p>
                    <p class="card-text">Nascimento: @Html.ValueFor(modelItem => animal.Birthday, "{0:d}")</p>
                </div>
            </div>
                    if (counter % 2 == 0)
                    {
                        <div class="w-100 d-none d-sm-block d-md-none"><!-- wrap every 2 on sm--></div>
                    }
                    if (counter % 3 == 0)
                    {
                        <div class="w-100 d-none d-md-block d-lg-none"><!-- wrap every 3 on md--></div>
                    }
                    if (counter % 4 == 0)
                    {
                        <div class="w-100 d-none d-lg-block d-xl-none"><!-- wrap every 4 on lg--></div>
                    }
                    if (counter % 5 == 0)
                    {
                        <div class="w-100 d-none d-xl-block"><!-- wrap every 5 on xl--></div>
                    }
                    counter = counter + 1;
                }
            }
        </div>
    </div>